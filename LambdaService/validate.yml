parameters:
- name: buildDirectories
  type: object
  default: ''

steps:
- ${{ if eq(parameters.buildDirectories, '') }}:
  - script: echo "##vso[task.logissue type=warning]No build directories specified."

- ${{ if ne(parameters.buildDirectories, '') }}:
  - ${{ each entry in parameters.buildDirectories }}:    
    - task: Npm@1
      displayName: Install ${{ entry.Key}}
      inputs:
        command: install
        workingDir: lambdas/${{ entry.Key}}

    - script: npm test
      displayName: Unit Test ${{ entry.Key}}
      workingDirectory: lambdas/${{ entry.Key}}
