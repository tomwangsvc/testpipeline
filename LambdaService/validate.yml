parameters:
- name: buildDirectories
  type: object
  default: ''

steps:
- ${{ if eq(parameters.buildDirectories, '') }}:
  - script: echo "##vso[task.logissue type=warning]No build directories specified."

- ${{ if ne(parameters.buildDirectories, '') }}:
  - ${{ each entry in parameters.buildDirectories }}:
    - script: ls -a
      displayName: ${{ entry.Value}}
      workingDirectory: lambdas/${{ entry.Key}}
    
    - task: npmAuthenticate@0
      displayName: Override .npmrc
      inputs:
        workingFile: '.npmrc'
      workingDirectory: lambdas/${{ entry.Key}}
# - script: |
#     for dir in *
#       do (cd "$dir" && npm install && npm test)
#     done
#   displayName: Unit Tests
#   workingDirectory: lambdas
